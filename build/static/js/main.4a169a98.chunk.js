(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{25:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAADBCAIAAACIWC9VAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH5QsYDCIc0omN+wAABGtJREFUeNrt211rHFUcx/H/mYfdNBs3NE1T7IOxpmqjUrEqCCIo2OADvgBBEERExffhpS8it+2FIN54kV4J1oJSEIpLoa1LfGhDEjb7kNmdOV60gdzumYEfm/1+rnJzJjvznXNmdph13nuDTqT+ANOOAGIEECOAGAHEkoAx+8N8u7tfFAG3Ty6JXeSceq8rUK/Fc/W0/K6EBLj3X2d9o9XpZ27M/++c1eIojid+2nlvr11Y/PD15Xoal9xUSID2Vnd9489/d/suGjOAWeSci5xN+HcP7/2nbz+79so5TYDC+8GoGOSFFUdhMQlR+O5+NhoNzdKSWwoJYI/OYufsSKzmQUfAijzv93uz9ThNa+MuxYdN/HKs4s1nWba31x0MBmUe5wTNABwYDYfdokiSJE0D16KgGeBt0q+ilXGW5/lOd7Dby/KQ+/LAGeA9BQ5ko+Laz62siD67cnGxOTPu8JAZwAPsQ9woLzZ+b//4671OfxgwnotweW7oLcsDz0oCVCP4RpQAYgQQI4AYAcQIIEYAMQKIEUCMAGIEECOAGAHECCBGADECiBFAjABiBBAjgBgBxAggRgAxAogRQIwAYgQQI4AYAcQIIEYAMQKIEUCMAGIEECOAGAHECCBGADECiBFAjABiBBAjgBgBxAggRgAxAogRQIwAYgQQI4AYAcQIIEYAMQKIEUCMAGIEECOAGAHECCBGADECiBFAjABiBBAjgBgBxAggRgAxAogRQIwAYgQQI4AYAcQIIEYAMQKIEUCMAGIEECOAGAHECCBGADECiBFAjABiBBAjgBgBxAggRgAxAogRQIwAYgQQI4AYAcQIIEYAMQKIEUCMAGIEECOAGAHECCBGADECiBFAjABiBBAjgBgBxAggRgAxAogRQIwAYgQQI4AYAcQIIEYAMQKE8tVshgCBvHnvzZXeDgECeWbA0UAAMQKIEUCMAGIEECOAGAHECCBGADECiBFAjABiBBAjgBgBxAggRgAxAogRQIwAYgQQI4AYAcQIIEYAMQKIEUCMAGJBAXxlb8dPpEr3PQkYE0Uudo/fjE9jdyyOKnhPfqL4ws+ksTMrXyMkwFMnG6vn5v/+o++9Xzk598mby/OzSVXvy08Eb/bMUiONo/J7HRLg/Knm1x+8dPdh984/na1OtvBE7aNXT0/ZHLDIuShy5c+6kABJHL378pkv1la/vfrbw87+1V/+unz++MpSo5iySXDwR6ndDglgZs3Z2sdvrbQ2d9evt27c2b52o/3N2oVGPZmmBI8lkSsz+wMDmNnZE40v33uh/WDvp1ub39/cXD3TvPz08WKqLgVmzlkvy/vD3ELvQ8IDOOcuLS989f6L97e6t9s73/1w++xCw1sVvxycKHnub93fee7JeR908oUHMLM0id65dPrzKxfXr7d6g+Hdrf60Hf1HTswfWz7VTJM4YKwL63bY5nbvZutBLxupj4OGM/PeFpszbzy/NDeTjj28fACUwbMgMQKIEUCMAGIEECOA2P/gyv3Hm28ebgAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMS0xMS0yNFQxMjozNDoyOC0wNTowMFQrrR8AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjEtMTEtMjRUMTI6MzQ6MjgtMDU6MDAldhWjAAAAAElFTkSuQmCC"},27:function(e,t,n){e.exports=n(43)},32:function(e,t,n){},41:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var a=n(7),o=n(22),r=n.n(o),c=(n(32),n(1)),s=n.n(c),l=n(12),i=n(13),A=n(15),u=n(14),f=n(16),d=n(9),E=n(26),m=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(A.a)(this,Object(u.a)(t).call(this))).state={books:[],currentlyReading:[],wantToRead:[],read:[],setBooks:function(t){var n=t.filter(function(e){return"currentlyReading"===e.shelf}),a=t.filter(function(e){return"wantToRead"===e.shelf}),o=t.filter(function(e){return"read"===e.shelf});e.setState({books:t,currentlyReading:n,wantToRead:a,read:o})},updateBookShelf:function(t,n){var a=e.state.books.map(function(a){var o=e.state.books.find(function(e){return e.id===t.id});if(o&&o.id===a.id){if(console.log(t),"none"===n){var r=a;r.shelf;a=Object(E.a)(r,["shelf"])}a.shelf=n}return a});e.state.setBooks(a)}},e}return Object(f.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement(h.Provider,{value:Object(d.a)({},this.state)},this.props.children)}}]),t}(c.Component),h=s.a.createContext(),b=n(0),p=n(6),g=n.n(p),k=n(8),B=n(17),v=function(){return s.a.createElement(a.b,{className:"close-search",to:"/"},"Close")},C=n(25),j=n.n(C),I="https://reactnd-books-api.udacity.com",O=localStorage.token;O||(O=localStorage.token=Math.random().toString(36).substr(-8));var Q={Accept:"application/json",Authorization:O},w=function(){return fetch("".concat(I,"/books"),{headers:Q}).then(function(e){return e.json()}).then(function(e){return e.books})},y=function(e,t){return fetch("".concat(I,"/books/").concat(e.id),{method:"PUT",headers:Object(d.a)({},Q,{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then(function(e){return e.json()})},x=function(e){return fetch("".concat(I,"/search"),{method:"POST",headers:Object(d.a)({},Q,{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then(function(e){return e.json()}).then(function(e){return e.books})},M=function(e){var t=e.book,n=e.onUpdateBookShelf,a=function(){var e=Object(k.a)(g.a.mark(function e(a){var o,r;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=a.target.value,e.next=3,y(t,o);case 3:r=e.sent,n(t,o,r);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return s.a.createElement("div",{className:"book-shelf-changer"},s.a.createElement("select",{onChange:a,value:t.shelf?t.shelf:"none"},s.a.createElement("option",{value:"move",disabled:!0},"Move to..."),s.a.createElement("option",{value:"currentlyReading"},"Currently Reading"),s.a.createElement("option",{value:"wantToRead"},"Want to Read"),s.a.createElement("option",{value:"read"},"Read"),s.a.createElement("option",{value:"none"},"None")))},N=function(e){var t=e.book,n=e.updateBookShelf;return s.a.createElement("li",null,s.a.createElement("div",{className:"book"},s.a.createElement("div",{className:"book-top"},s.a.createElement("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url(".concat(t.imageLinks&&t.imageLinks.thumbnail?t.imageLinks.thumbnail:j.a,")")}},s.a.createElement(M,{book:t,onUpdateBookShelf:n}))),s.a.createElement("div",{className:"book-title"},t.title),s.a.createElement("div",{className:"book-authors"},t.auhors?t.authors.join("; "):"")))},G=function(e){var t=e.updateBookShelf,n=Object(c.useState)(),a=Object(B.a)(n,2),o=a[0],r=a[1],l=Object(c.useState)(),i=Object(B.a)(l,2),A=i[0],u=i[1],f=Object(c.useState)([]),E=Object(B.a)(f,2),m=E[0],h=E[1];Object(c.useEffect)(function(){function e(){return(e=Object(k.a)(g.a.mark(function e(){var t;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:t=e.sent,h(t);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[]);var b=function(){var e=Object(k.a)(g.a.mark(function e(t){var n,a;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.target.value,r(n),!n.trim()){e.next=9;break}return e.next=5,x(o);case 5:a=e.sent,Array.isArray(a)?u(a):u([]),e.next=10;break;case 9:u([]);case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return s.a.createElement("div",{className:"search-books"},s.a.createElement("div",{className:"search-books-bar"},s.a.createElement(v,null),s.a.createElement("div",{className:"search-books-input-wrapper"},s.a.createElement("input",{type:"text",placeholder:"Search by title or author",onChange:function(e){return b(e)},value:o||""}))),s.a.createElement("div",{className:"search-books-results"},s.a.createElement("ol",{className:"books-grid"},A&&A.map(function(e){var n=m.find(function(t){return t.id===e.id});return n&&(e.shelf=n.shelf),s.a.createElement(N,{key:e.id,book:Object(d.a)({},e),updateBookShelf:t})}))))},R=function(e){var t=e.books,n=e.shelfTitle,a=e.updateBookShelf;return s.a.createElement("div",{className:"bookshelf"},s.a.createElement("h2",{className:"bookshelf-title"},n),s.a.createElement("div",{className:"bookshelf-books"},s.a.createElement("ol",{className:"books-grid"},t&&t.map(function(e){return s.a.createElement(N,{key:e.id,book:e,updateBookShelf:a})}))))},S=function(){return s.a.createElement(a.b,{className:"open-search",to:"/search"},s.a.createElement("button",null,"Add a Book"))},T=function(e){var t=e.setBooks,n=e.currentlyReading,o=e.wantToRead,r=e.read,l=e.updateBookShelf;return Object(c.useEffect)(function(){function e(){return(e=Object(k.a)(g.a.mark(function e(){var n;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:n=e.sent,t(n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[]),s.a.createElement("div",{className:"list-books"},s.a.createElement("div",{className:"list-books-title"},s.a.createElement(a.b,{style:{color:"inherit",textDecoration:"inherit"},to:"/"},s.a.createElement("h1",null,"MyReads"))),s.a.createElement("div",{className:"list-books-content"},s.a.createElement(R,{shelfTitle:"Currently Reading",books:n,updateBookShelf:l}),s.a.createElement(R,{shelfTitle:"Want to Read",books:o,updateBookShelf:l}),s.a.createElement(R,{shelfTitle:"Read",books:r,updateBookShelf:l})),s.a.createElement(S,null))},D=(n(41),function(e){function t(){return Object(l.a)(this,t),Object(A.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"app"},s.a.createElement(m,null,s.a.createElement(b.c,null,s.a.createElement(b.a,{exact:!0,path:"/",render:function(){return s.a.createElement(h.Consumer,null,function(e){return s.a.createElement(T,e)})}}),s.a.createElement(b.a,{exact:!0,path:"/search",render:function(){return s.a.createElement(h.Consumer,null,function(e){return s.a.createElement(G,e)})}}))))}}]),t}(s.a.Component));r.a.render(s.a.createElement(a.a,null,s.a.createElement(D,null)),document.getElementById("root"))}},[[27,2,1]]]);
//# sourceMappingURL=main.4a169a98.chunk.js.map